<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ูุด ูุงู ุฑุฃููุ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="logo">๐๏ธ ูุด ูุงู ุฑุฃููุ</div>
      <nav>
        <a href="#hero">ุงูุฑุฆูุณูุฉ</a>
        <a href="#cats">ุงูุฃูุณุงู</a>
        <a href="#qs">ุงูุฃุณุฆูุฉ</a>
        <a href="#" onclick="openForm()">ุงุทุฑุญ ุณุคุงู</a>
      </nav>
    </div>
  </header>

  <section id="hero" class="hero-section">
    <div class="hero-text">
      <h1>ูุด ูุงู ุฑุฃููุ</h1>
      <p>ุฎุฐ ุฑุฃู ุงููุงุณ ูุณุงุนุฏ ุบูุฑู ูู ุงุชุฎุงุฐ ุงููุฑุงุฑ</p>
      <button class="btn" onclick="document.getElementById('qs').scrollIntoView({behavior:'smooth'})">ุงุจุฏุฃ ุงูุชุตูุญ</button>
    </div>
  </section>

  <section id="cats" class="cats-section">
    <h2>ุงูุฃูุณุงู</h2>
    <div class="cat-grid">
      <div class="cat" onclick="filterQs('ุจุฑูุฌุฉ')">ุจุฑูุฌุฉ</div>
      <div class="cat" onclick="filterQs('ุฃุฌูุฒุฉ')">ุฃุฌูุฒุฉ</div>
      <div class="cat" onclick="filterQs('ุฃูุนุงุจ')">ุฃูุนุงุจ</div>
      <div class="cat" onclick="filterQs('ูุธุงุฆู')">ูุธุงุฆู</div>
      <div class="cat" onclick="filterQs('ูุดููุฉ')">ูุดููุฉ</div>
      <div class="cat" onclick="filterQs('ุนุงู')">ุนุงู</div>
      <div class="cat" onclick="filterQs('ุฃุฎุฑู')">ุฃุฎุฑู</div>
    </div>
  </section>

  <main id="qs">
    <h2>ุงูุฃุณุฆูุฉ</h2>
    <div id="ql" class="question-list"><button onclick="submitQ()">ูุดุฑ</button>
</div>
  </main>

  <footer>
    <p>ยฉ 2025 ูุด ูุงู ุฑุฃููุ โ ูู ุงูุญููู ูุญููุธุฉ</p>
  </footer>

  <!-- ูุงูุฐุฉ ุทุฑุญ ุณุคุงู -->
  <div id="formBox" class="popup-form">
    <div class="form">
      <h3>ุงูุชุจ ุณุคุงูู</h3>
      <input id="qText" type="text" placeholder="ุงูุชุจ ุณุคุงูู ููุง..." />
      <select id="qCat">
        <option>ุจุฑูุฌุฉ</option>
        <option>ุฃุฌูุฒุฉ</option>
        <option>ุฃูุนุงุจ</option>
        <option>ูุธุงุฆู</option>
        <option>ูุดููุฉ</option>
        <option>ุนุงู</option>
        <option>ุฃุฎุฑู</option>
      </select>
      <button onclick="submitQ()">ูุดุฑ</button>
      <button onclick="closeForm()" class="close">ุฅุบูุงู</button>
    </div>
  </div>

  <script>
    function openForm() {
      document.getElementById("formBox").style.display = "flex";
    }
    function closeForm() {
      document.getElementById("formBox").style.display = "none";
    }
  </script>

  
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
  import {
    getFirestore, collection, addDoc, getDocs
  } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDYZhJEuNZkcXUpMblwW-jh2jZdUZ147BY",
    authDomain: "wsh-kan-rayk.firebaseapp.com",
    projectId: "wsh-kan-rayk",
    storageBucket: "wsh-kan-rayk.appspot.com",
    messagingSenderId: "149539289082",
    appId: "1:149539289082:web:eb9cb8f61c2bad12201643"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  let allQuestions = [];

  async function loadQuestions() {
    const ql = document.getElementById("ql");
    if (!ql) return;
    ql.innerHTML = "";
    allQuestions = [];

    const snapshot = await getDocs(collection(db, "questions"));
    snapshot.forEach(doc => {
      const data = doc.data();
      allQuestions.push(data);
    });

    renderQs();
  }

  function renderQs(cat = null) {
    const ql = document.getElementById("ql");
    if (!ql) return;
    ql.innerHTML = "";

    const list = cat ? allQuestions.filter(q => q.category === cat) : allQuestions;

    list.forEach(q => {
      const div = document.createElement("div");
      div.className = "q";
      div.onclick = () => {
        localStorage.setItem("selQ", q.title);
        location.href = "question.html";
      };
      div.innerHTML = `
        <strong>${q.title}</strong>
        <div class="m">${q.category} โข ${q.time}</div>
      `;
      ql.appendChild(div);
    });
  }

  window.submitQ = async function () {
    const title = document.getElementById("qText").value;
    const cat = document.getElementById("qCat").value;

    if (title.trim()) {
      await addDoc(collection(db, "questions"), {
        title: title,
        category: cat,
        time: "ุงูุขู"
      });

      document.getElementById("formBox").style.display = "none";
      loadQuestions();
    }
  };

  window.filterQs = function(cat) {
    renderQs(cat);
  };

  loadQuestions();
</script>

</body>
</html>
